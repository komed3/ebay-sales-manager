extends ./_layout
include ./mixin/calendar
include ./mixin/chart
include ./mixin/stats

append scripts
  script( src= "https://cdn.jsdelivr.net/npm/chart.js" )
  script( src= "/js/chart.min.js", defer ) 

append styles
  link( rel= "stylesheet", href= "/css/calendar.min.css" )
  link( rel= "stylesheet", href= "/css/stats.min.css" )

block main
  h2= t( 'stats.revenue' )
    div.actions
      each type in [ 'monthly', 'annual' ]
        a(
          href= '/stats?type=' + type,
          class= ( query.type === type ? 'active' : '' )
        )= t( 'stats.type.' + type )

  +chart( 'report', reports )
  h2= t( 'stats.stats' )
  +stats( stats )
  h2= t( 'stats.calendar' )
  +calendar( dates )
